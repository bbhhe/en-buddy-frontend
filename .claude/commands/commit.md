---
allowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*), Bash(git diff:*), Bash(git log:*)
argument-hint: [message]
description: 使用约定式提交格式和表情符号创建格式良好的提交
---

# 智能 Git 提交

创建格式良好的提交：$ARGUMENTS

## 当前仓库状态

- Git 状态：!git status --porcelain
- 当前分支：!git branch --show-current
- 已暂存的更改：!git diff --cached --stat
- 未暂存的更改：!git diff --stat
- 最近的提交：!git log --oneline -5

## 此命令的功能

1. 使用 git status 检查哪些文件已暂存
2. 如果暂存的文件为 0 个，则自动使用 git add 添加所有已修改和新文件
3. 执行 git diff 以了解将要提交的更改
4. 分析差异以是否存在多个不同的逻辑更改
5. 如果检测到多个不同的更改，建议将提交拆分为多个较小的提交
6. 对于每个提交（如果不是拆分的，则为单个提交），使用表情符号约定式提交格式创建提交信息

## 提交的最佳实践

- **原子提交**：每个提交应包含相关的更改，并且具有单一目的
- **拆分大型更改**：如果更改涉及多个方面，请将它们拆分为单独的提交
- **约定式提交格式**：使用 <类型>: <描述> 的格式，其中类型是以下之一：
    - feat: 新功能
    - fix: 错误修复
    - docs: 文档更改
    - style: 代码样式更改（格式等）
    - refactor: 既不是修复错误也不是添加功能的代码更改
    - perf: 性能改进
    - test: 添加或修复测试
    - chore: 对构建过程、工具等的更改
- **现在时、祈使语气**：将提交信息编写为命令（例如，“add feature” 而不是 “added feature”）
- **简洁的第一行**：将第一行保持在 72 个字符以内
- **表情符号**：每种提交类型都配有相应的表情符号：
    - ✨ feat: 新功能
    - 🐛 fix: 错误修复
    - 📝 docs: 文档
    - 💄 style: 格式化/样式
    - ♻️ refactor: 代码重构
    - ⚡️ perf: 性能改进
    - ✅ test: 测试
    - 🔧 chore: 工具、配置
    - 🚀 ci: CI/CD 改进
    - 🗑️ revert: 恢复更改
    - 🧪 test: 添加一个失败的测试
    - 🚨 fix: 修复编译器/Linter 警告
    - 🔒️ fix: 修复安全问题
    - 👥 chore: 添加或更新贡献者
    - 🚚 refactor: 移动或重命名资源
    - 🏗️ refactor: 进行架构更改
    - 🔀 chore: 合并分支
    - 📦️ chore: 添加或更新编译后的文件或包
    - ➕ chore: 添加依赖
    - ➖ chore: 移除依赖
    - 🌱 chore: 添加或更新种子文件
    - 🧑‍💻 chore: 改善开发者体验
    - 🔍️ feat: 添加或更新与多线程或并发相关的代码
    - 🏷️ feat: 添加或更新类型
    - 💬 feat: 添加或更新文本和字面量
    - 🌐 feat: 国际化和本地化
    - 👔 feat: 添加或更新业务逻辑
    - 📱 feat: 处理响应式设计
    - 🚸 feat: 改善用户体验/可用性
    - 🩹 fix: 解决非关键问题的简单修复
    - 🥅 fix: 捕获错误
    - 👽️ fix: 由于外部 API 更新而更新代码
    - 🔥 fix: 删除代码或文件
    - 🎨 style: 改善代码的结构/格式
    - 🚑️ fix: 关键热修复
    - 🎉 chore: 开始一个项目
    - 🔖 chore: 发布/版本标签
    - 🚧 wip: 进行中的工作
    - 💚 fix: 修复 CI 构建
    - 📌 chore: 将依赖项固定到特定版本
    - 👷 ci: 添加或更新 CI 构建系统
    - 📈 feat: 添加或更新分析或跟踪代码
    - ✏️ fix: 修复错别字
    - ⏪️ revert: 恢复更改
    - 📄 chore: 添加或更新许可证
    - 💥 feat: 引入破坏性更改
    - 🍱 assets: 添加或更新资源
    - ♿️ feat: 改善可访问性
    - 💡 docs: 在源代码中添加或更新注释
    - 🗃️ db: 执行数据库相关更改
    - 🔊 feat: 添加或更新日志
    - 🔇 fix: 移除日志
    - 🤡 test: 模拟事物
    - 🥚 feat: 添加或更新彩蛋
    - 🙈 chore: 添加或更新 .gitignore 文件
    - 📸 test: 添加或更新快照
    - ⚗️ experiment: 进行实验
    - 🚩 feat: 添加、更新或移除功能标志
    - 💫 ui: 添加或更新动画和过渡
    - ⚰️ refactor: 移除死代码
    - 🦺 feat: 添加或更新与验证相关的代码
    - ✈️ feat: 改善离线支持

## 拆分提交的指南

在分析差异时，请根据以下标准考虑拆分提交：

1. **不同的关注点**：对代码库不相关部分的更改
2. **不同类型的更改**：混合功能、修复、重构等
3. **文件模式**：对不同类型文件的更改（例如，源代码与文档）
4. **逻辑分组**：更容易单独理解或审查的更改
5. **大小**：非常大的更改，如果分解会更清晰

## 示例

好的提交信息：
- ✨ feat: 添加用户认证系统
- 🐛 fix: 解决过程中的内存泄漏
- 📝 docs: 使用新端点更新 API 文档
- ♻️ refactor: 简化错误处理逻辑
- 🚨 fix: 解决文件中的警告
- 🧑‍💻 chore: 改善开发者工具设置过程
- 👔 feat: 为交易验证实现业务逻辑
- 🩹 fix: 解决标题中的不一致
- 🚑️ fix: 修复身份验证流程中的关键安全漏洞
- 🎨 style: 重组组件结构以提高可读性
- 🔥 fix: 移除已弃用的旧代码
- 🦺 feat: 为用户注册添加输入验证
- 💚 fix: 解决失败的 CI 管道测试
- 📈 feat: 为用户参与度实施分析跟踪
- 🔒️ fix: 加强身份验证密码要求
- ♿️ feat: 改善表单对屏幕阅读器的可访问性

拆分提交的示例：
- 第一次提交：✨ feat: 添加新的版本类型定义
- 第二次提交：📝 docs: 更新新版本的文档
- 第三次提交：🔧 chore: 更新 build.gradle 依赖
- 第四次提交：🏷️ feat: 为新的 API 端点添加类型定义
- 第五次提交：🧵 feat: 改善工作线程中的并发处理
- 第六次提交：🚨 fix: 解决新代码中的问题
- 第七次提交：✅ test: 为新的版本功能添加单元测试
- 第八次提交：🔒️ fix: 更新具有安全漏洞的依赖


## 重要说明

- 如果已暂存特定文件，该命令将只提交这些文件
- 如果没有暂存文件，它将自动暂存所有已修改和新文件
- 提交信息将根据检测到的更改构建
- 在提交之前，该命令将检查差异以确定多个提交是否更合适
- 如果建议进行多个提交，它将帮助您分别暂存和提交更改
- 始终检查提交差异以确保信息与更改相匹配